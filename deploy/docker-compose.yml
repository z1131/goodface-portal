services:
  goodface-portal:
    image: ${ACR_REGISTRY}/${ACR_NAMESPACE}/goodface-portal:${IMAGE_TAG}
    container_name: goodface-portal
    restart: always
    ports:
      - "8001:8001"
    environment:
      SPRING_PROFILES_ACTIVE: ${SPRING_PROFILES_ACTIVE:-prod}
      SPRING_DATASOURCE_URL: ${SPRING_DATASOURCE_URL}
      SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME}
      SPRING_DATASOURCE_PASSWORD: ${SPRING_DATASOURCE_PASSWORD}
      SPRING_REDIS_HOST: ${SPRING_REDIS_HOST}
      SPRING_REDIS_PORT: ${SPRING_REDIS_PORT}
      SPRING_REDIS_PASSWORD: ${SPRING_REDIS_PASSWORD}
      DUBBO_REGISTRY_ADDRESS: ${DUBBO_REGISTRY_ADDRESS}
      DUBBO_REGISTRY_NAMESPACE: ${DUBBO_REGISTRY_NAMESPACE}
      NACOS_USERNAME: ${NACOS_USERNAME}
      NACOS_PASSWORD: ${NACOS_PASSWORD}
    # 按需挂载日志或配置
    volumes:
      - ./logs:/app/logs